import fs from "node:fs";
const filename = "test.wasm";

const code = await fs.readFileSync(filename);
// // prettier-ignore
// const code = [// await fs.readFileSync(filename);
// 0x00, 0x61, 0x73, 0x6d,
// 0x01, 0x00, 0x00, 0x00,
// 0x01, 0x07, 0x01, 0x60, 0x02, 0x7f, 0x7f, 0x01, 0x7f,
// 0x03, 0x02, 0x01, 0x00,
// 0x07, 0x07, 0x01, 0x03, 0x61, 0x64, 0x64, 0x00, 0x00,
// 0x0a, 0x09, 0x01, 0x07, 0x00, 0x20, 0x00, 0x20, 0x01, 0x6a, 0x0b
// ];

const arr = Uint8Array.from(code);
const mod = await WebAssembly.compile(arr);
const i = await WebAssembly.instantiate(mod);
console.log(i.exports.add(1, 2));
